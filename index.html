<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wedding Profile Book | Yuki & Moka</title>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,400;0,600;1,400&family=Shippori+Mincho:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
<div class="menu-btn" id="openMenuModal">
        <span>&equiv;</span>
    </div>

    <header class="hero container fade-in" id="top">
        <img src="images/hero.jpg" alt="Wedding Couple" class="hero-img">
        
        <h1 class="hero-title">Yuki & Moka</h1>
        <p class="hero-date">2026.04.11 | Hotel Chinzanso Tokyo</p>
    </header>

    <section class="container fade-in" id="greeting">
        <h2 class="section-title">Greeting</h2>
        <div class="greeting-text">
            <p>本日はご多用の中<br>私たちの結婚式にご参列いただき<br>誠にありがとうございます。</p>
            <p>皆様に支えられ<br>今日という日を迎えることができました。</p>
            <p>ささやかながら<br>感謝の気持ちを込めて<br>プロフィールブックを作成しました。</p>
            <p>どうぞごゆっくりお楽しみください。</p>
        </div>
    </section>

    <section class="container fade-in" id="preshoot">
        <h2 class="section-title">PRESHOOT</h2>
        
        <div class="slideshow-container" id="slideshowPre">
            <div class="mySlidesPre fade-slide">
                <img src="images/preshoot/01.jpg" alt="Pre Photo 1">
            </div>

            <div class="mySlidesPre fade-slide">
                <img src="images/preshoot/02.jpg" alt="Pre Photo 2">
            </div>

            <div class="mySlidesPre fade-slide">
                <img src="images/preshoot/03.jpg" alt="Pre Photo 3">
            </div>

            <div class="mySlidesPre fade-slide">
                <img src="images/preshoot/04.jpg" alt="Pre Photo 4">
            </div>

            <div class="mySlidesPre fade-slide">
                <img src="images/preshoot/05.jpg" alt="Pre Photo 5">
            </div>

            <a class="prev-arrow" onclick="plusSlidesPre(-1)">&#10094;</a>
            <a class="next-arrow" onclick="plusSlidesPre(1)">&#10095;</a>
        </div>
        <br>
        <div class="dots-container" style="text-align:center">
            <span class="dotPre" onclick="currentSlidePre(1)"></span>
            <span class="dotPre" onclick="currentSlidePre(2)"></span>
            <span class="dotPre" onclick="currentSlidePre(3)"></span>
            <span class="dotPre" onclick="currentSlidePre(4)"></span>
            <span class="dotPre" onclick="currentSlidePre(5)"></span>
        </div>
    </section>

    <section class="container fade-in" id="profile">
        <h2 class="section-title">Profile</h2>
        
        <div class="profile-card">
            <img src="images/profile/yuki.jpg" alt="Groom" class="profile-img">
            <h3 class="profile-name">Yuki Tanaka</h3> 
            <p class="profile-desc">
                1995年生まれ、東京都出身。<br>
                趣味はキャンプとコーヒー。<br>
                休日は美味しい豆を探してカフェ巡りをしています。<br>
                一言：今日は最高の1日にしましょう！
            </p>
        </div>

        <div class="profile-card">
            <img src="images/profile/moka.jpg" alt="Bride" class="profile-img">
            <h3 class="profile-name">Moka Suzuki</h3>
            <p class="profile-desc">
                1996年生まれ、神奈川県出身。<br>
                趣味は映画鑑賞と旅行。<br>
                特技はどこでも寝られること。<br>
                一言：たくさん写真を撮ってくださいね♪
            </p>
        </div>
    </section>
    
    <section class="container fade-in" id="story">
        <h2 class="section-title">Our Story</h2>

        <div class="story-item">
            <div class="story-img-box">
                <img src="images/story/01.jpg" alt="Story Photo 1">
            </div>
            <div class="story-content">
                <h4>2022.05.20 | First Date</h4>
                <p>初めて二人でキャンプに行った時の写真です。雨予報でしたが、奇跡的に晴れて最高の星空を見ることができました。ここから二人の関係が始まりました。</p>
            </div>
        </div>

        <div class="story-item">
            <div class="story-img-box">
                <img src="images/story/02.jpg" alt="Story Photo 2">
            </div>
            <div class="story-content">
                <h4>2023.11.15 | Proposal</h4>
                <p>モカの誕生日サプライズで旅行先の海辺でプロポーズしました。緊張しすぎて何を言ったか覚えていませんが、指輪を渡した瞬間、泣きながら「はい」と言ってくれた時は感動しました。</p>
            </div>
        </div>

        <div class="story-item">
            <div class="story-img-box">
                <img src="images/story/03.jpg" alt="Story Photo 3">
            </div>
            <div class="story-content">
                <h4>2024.03.01 | Together</h4>
                <p>二人で暮らし始めた記念に撮った一枚。家具を選ぶのは大変でしたが、二人だけの空間ができて毎日が楽しくなりました。これからもたくさん笑い合って過ごしたいです。</p>
            </div>
        </div>
    </section>

    <section class="container fade-in" id="memories">
        <h2 class="section-title">Our Memories</h2>
        
        <div class="slideshow-container" id="slideshow">
            
            <div class="mySlides fade-slide">
                <img src="images/memories/01.jpg" alt="Memory Photo 1">
            </div>

            <div class="mySlides fade-slide">
                <img src="images/memories/02.jpg" alt="Memory Photo 2">
            </div>

            <div class="mySlides fade-slide">
                <img src="images/memories/03.jpg" alt="Memory Photo 3">
            </div>

            <div class="mySlides fade-slide">
                <img src="images/memories/04.jpg" alt="Memory Photo 4">
            </div>

            <div class="mySlides fade-slide">
                <img src="images/memories/05.jpg" alt="Memory Photo 5">
            </div>
            <a class="prev-arrow" onclick="plusSlides(-1)">&#10094;</a>
            <a class="next-arrow" onclick="plusSlides(1)">&#10095;</a>
        </div>
        <br>
        
        <div class="dots-container" style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span> 
            <span class="dot" onclick="currentSlide(2)"></span> 
            <span class="dot" onclick="currentSlide(3)"></span> 
            <span class="dot" onclick="currentSlide(4)"></span>
            <span class="dot" onclick="currentSlide(5)"></span>
        </div>
        
    </section>

    <section class="container fade-in" id="seating-chart">
        <h2 class="section-title">Seating Chart</h2>
        <div class="seating-chart-area">
            <img src="https://via.placeholder.com/800x600?text=Seating+Chart+Example" alt="Seating Chart" id="seatingChartImg">
            <p>※画像をタップすると拡大表示されます。</p>
        </div>
    </section>
    
    <section class="container fade-in" id="share-photos">
        <h2 class="section-title">Share Photos</h2>
        <div class="share-text">
            <p>本日の思い出の写真を<br>ぜひここからシェアしてください。<br>グループごとにアルバムを用意しました。</p>
        </div>
        
        <div class="share-buttons">
            <a href="https://photos.app.goo.gl/xxxxxxxxxxxx" target="_blank" class="share-btn">
                <span>For Friends</span>
                <span class="jp-label">友人・同僚の方はこちら</span>
            </a>

            <a href="https://photos.app.goo.gl/yyyyyyyyyyyy" target="_blank" class="share-btn">
                <span>For Family</span>
                <span class="jp-label">親族の方はこちら</span>
            </a>

            <a href="https://photos.app.goo.gl/zzzzzzzzzzzz" target="_blank" class="share-btn">
                <span>All Guests</span>
                <span class="jp-label">その他の方はこちら</span>
            </a>
        </div>
    </section>

    <footer>
        <p>Thank you for coming today.</p>
        <p>Yuki & Moka</p>
    </footer>

    <div id="menuModal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <nav>
                <ul class="menu-list">
                    <li><a href="#top">TOP<span class="jp-nav">トップ</span></a></li>
                    <li><a href="#greeting">GREETING<span class="jp-nav">ごあいさつ</span></a></li>
                    <li><a href="#profile">PROFILE<span class="jp-nav">プロフィール</span></a></li>
                    <li><a href="#story">OUR STORY<span class="jp-nav">二人の物語</span></a></li>
                    <li><a href="#memories">MEMORIES<span class="jp-nav">思い出の写真</span></a></li>
                        <li><a href="#preshoot">PRESHOOT<span class="jp-nav">前撮り</span></a></li>
                    <li><a href="#seating-chart">SEATING CHART<span class="jp-nav">席次表</span></a></li>
                    <li><a href="#share-photos">SHARE PHOTOS<span class="jp-nav">写真の共有</span></a></li>
                </ul>
            </nav>
        </div>
    </div>

    <div id="imgModal" class="modal">
        <span class="close-btn">&times;</span>
        <div class="modal-content" id="imgModalContent">
            <img class="modal-img" id="expandedImg">
        </div>
    </div>


    <script>
        // ==================================
        // JavaScript (スライドショー、スクロールアニメーション & モーダル)
        // ==================================
        
         // --- 1. Slideshow ---
        let slideIndex = 1; // 1から始めるように修正
        let slideTimer;
        let startX = 0; 

        // 前後のスライドに移動する関数を追加（矢印ボタンから呼び出される）
        function plusSlides(n) {
            clearTimeout(slideTimer);
            showSlides(slideIndex += n);
        }

        // ドットから直接スライドに移動する関数を修正
        function currentSlide(n) {
            clearTimeout(slideTimer);
            showSlides(slideIndex = n);
        }

        // スライドの表示とタイマーを設定するメイン関数をリファクタリング
        function showSlides(n) {
            let i;
            const slides = document.getElementsByClassName("mySlides");
            const dots = document.getElementsByClassName("dot");

            // スライドインデックスのループ処理（最後→最初、最初→最後）
            if (n > slides.length) {slideIndex = 1}    
            if (n < 1) {slideIndex = slides.length}
            
            // 全てのスライドを非表示にし、ドットを非アクティブ化
            for (i = 0; i < slides.length; i++) {
                slides[i].style.display = "none";  
                dots[i].className = dots[i].className.replace(" active-dot", "");
            }
            
            // 現在のスライドを表示し、ドットをアクティブ化
            slides[slideIndex-1].style.display = "block";  
            dots[slideIndex-1].className += " active-dot";
            
            // 自動再生タイマーの再設定
            clearTimeout(slideTimer);
            slideTimer = setTimeout(function() {
                showSlides(slideIndex += 1);
            }, 4000); 
        }

        // 初回実行
        showSlides(slideIndex);


        // スワイプ操作の修正（plusSlidesを利用するように修正）
        const slideshowContainer = document.getElementById('slideshow');
        
        slideshowContainer.addEventListener('touchstart', function(event) {
            startX = event.touches[0].clientX;
            clearTimeout(slideTimer); 
        });

        slideshowContainer.addEventListener('touchend', function(event) {
            const endX = event.changedTouches[0].clientX;
            const threshold = 50; 
            
            if (startX - endX > threshold) {
                plusSlides(1); // 次のスライド
            } else if (endX - startX > threshold) {
                plusSlides(-1); // 前のスライド
            }
            
            // スワイプ後も自動再生を継続
            slideTimer = setTimeout(function() {
                showSlides(slideIndex += 1);
            }, 4000);
        });

        // --- 2. フェードインアニメーション（既存） ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                    observer.unobserve(entry.target);
                }
            });
        }, { 
            threshold: 0.1 
        });

        document.querySelectorAll('.fade-in').forEach(el => {
            observer.observe(el);
        });

        // --- 3. モーダル（ポップアップ）制御（既存） ---
        
        const menuModal = document.getElementById('menuModal');
        const imgModal = document.getElementById('imgModal');
        const openMenuBtn = document.getElementById('openMenuModal');
        const seatingChartImg = document.getElementById('seatingChartImg');
        const expandedImg = document.getElementById('expandedImg');
        const menuLinks = document.querySelectorAll('#menuModal a');

        openMenuBtn.onclick = function() {
            menuModal.classList.add('is-active');
        }

        seatingChartImg.onclick = function() {
            imgModal.classList.add('is-active');
            expandedImg.src = this.src;
            document.querySelector('#imgModal .close-btn').style.color = '#fff';
        }

        document.querySelectorAll('.modal .close-btn').forEach(btn => {
            btn.onclick = function() {
                this.closest('.modal').classList.remove('is-active');
            }
        });

        window.onclick = function(event) {
            if (event.target == menuModal) {
                menuModal.classList.remove('is-active');
            }
            if (event.target == imgModal) {
                imgModal.classList.remove('is-active');
            }
        }

        menuLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                menuModal.classList.remove('is-active'); 
                
                const targetId = this.getAttribute('href');
                const targetElement = document.querySelector(targetId);

                if (targetElement) {
                    window.scrollTo({
                        top: targetElement.offsetTop,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // --- 1/4. 汎用スライダー実装（Memories と PRESHOOT の両方で利用） ---
        function Slider(opts) {
            this.container = document.getElementById(opts.containerId);
            this.slideClass = opts.slideClass;
            this.dotClass = opts.dotClass;
            this.index = 1;
            this.timer = null;
            this.startX = 0;
            this.interval = opts.interval || 4000;

            const self = this;

            this.show = function(n) {
                const slides = document.getElementsByClassName(self.slideClass);
                const dots = document.getElementsByClassName(self.dotClass);
                if (slides.length === 0) return;

                if (n > slides.length) { self.index = 1; }
                if (n < 1) { self.index = slides.length; }

                for (let i = 0; i < slides.length; i++) {
                    slides[i].style.display = 'none';
                    if (dots[i]) dots[i].className = dots[i].className.replace(' active-dot','');
                }

                slides[self.index-1].style.display = 'block';
                if (dots[self.index-1]) dots[self.index-1].className += ' active-dot';

                clearTimeout(self.timer);
                self.timer = setTimeout(function() { self.show(self.index += 1); }, self.interval);
            };

            this.plus = function(n) { clearTimeout(self.timer); self.show(self.index += n); };
            this.current = function(n) { clearTimeout(self.timer); self.show(self.index = n); };

            // タッチイベント
            if (this.container) {
                this.container.addEventListener('touchstart', function(e) {
                    self.startX = e.touches[0].clientX;
                    clearTimeout(self.timer);
                });

                this.container.addEventListener('touchend', function(e) {
                    const endX = e.changedTouches[0].clientX;
                    const threshold = 50;
                    if (self.startX - endX > threshold) {
                        self.plus(1);
                    } else if (endX - self.startX > threshold) {
                        self.plus(-1);
                    }
                });
            }

            // 初回表示
            this.show(this.index);
        }

        // インスタンス化（既存のHTMLのonclick属性と連携するためにグローバル参照を用意）
        const mainSlider = new Slider({ containerId: 'slideshow', slideClass: 'mySlides', dotClass: 'dot', interval: 4000 });
        const preSlider = new Slider({ containerId: 'slideshowPre', slideClass: 'mySlidesPre', dotClass: 'dotPre', interval: 4000 });

        // 旧スタイルのonclickハンドラと互換性を保つ小さなラッパー
        function plusSlides(n) { mainSlider.plus(n); }
        function currentSlide(n) { mainSlider.current(n); }
        function plusSlidesPre(n) { preSlider.plus(n); }
        function currentSlidePre(n) { preSlider.current(n); }

    </script>
</body>
</html>
